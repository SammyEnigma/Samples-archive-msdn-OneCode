# handler to Sys.Application.load
## Requires
* Visual Studio 2012
## License
* MS-LPL
## Technologies
* AJAX
* ASP.NET
## Topics
* AJAX
## IsPublished
* True
## ModifiedDate
* 2013-01-16 02:19:53
## Description

<h1>How to add an handler to Sys.Application.load event (CSComboBoxSysApplicationLoadName)</h1>
<h2>Introduction</h2>
<p class="MsoNormal">The sample illustrates the use of Sys.Application.add_load to add a handler to Sys.Application.load event. And the handler, usually scripted by users can successfully access DOMs generated by AJAX control toolkit. Otherwise, by simply
 placing a &lt;script&gt; tag in the page, may not find the DOMs, and their attriutes as expected.</p>
<p class="MsoNormal">This sample comes up because when some of the users use client side methods, say getElementById(), getElementsByTagName() to access DOM's generated by AJAX control toolkit, they fail to get the attribute(s) of some specific DOMs. So,
 they can't script to add features at client side to meet their personal needs or project's requirement by ASP.net technology.</p>
<h2>Building the Sample</h2>
<p class="MsoNormal">You can download the AjaxControlToolkit from here: <a href="http://ajaxcontroltoolkit.codeplex.com/">
http://ajaxcontroltoolkit.codeplex.com/</a>.</p>
<h2>Running the Sample</h2>
<p class="MsoListParagraphCxSpFirst" style=""><span style=""><span style="">Step 1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Open the CSComboBoxSysApplicationLoadName.sln.</p>
<p class="MsoListParagraphCxSpMiddle" style=""><span style=""><span style="">Step 2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Press CTRL&#43;F5 to load the application. After the page loaded, it pops up 2 alert boxes. Fist shows empty, second shows &quot;I am a TextBox.&quot;</p>
<p class="MsoListParagraphCxSpMiddle"><span style=""><img src="/site/view/file/74726/1/image.png" alt="" width="401" height="227" align="middle">
</span><br>
<span style=""><img src="/site/view/file/74727/1/image.png" alt="" width="335" height="217" align="middle">
</span></p>
<p class="MsoListParagraphCxSpMiddle" style=""><span style=""><span style="">Step 3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Open Default.aspx with a text editor. At line 34, comment out loader()<span style="">&nbsp;&nbsp;&nbsp;&nbsp;
</span>function - place two slashes before the code, something like //loader();</p>
<p class="MsoListParagraphCxSpMiddle" style=""><span style=""><span style="">Step 4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Remove the two slashed before Sys.Application.add_load(loader). Save and press Ctrl&#43;F5 to reload the application.</p>
<p class="MsoListParagraphCxSpMiddle" style=""><span style=""><span style="">Step 5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>It now shows &quot;Item 1&quot; in the first alert box, and &quot;I am a TextBox.&quot; in the second alert box.</p>
<p class="MsoListParagraphCxSpMiddle"><span style=""><img src="/site/view/file/74728/1/image.png" alt="" width="252" height="180" align="middle">
</span></p>
<p class="MsoListParagraphCxSpLast" style=""><span style=""><span style="">Step 6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>The validation is complete.</p>
<p class="MsoNormal"></p>
<h2>Using the Code</h2>
<p class="MsoNormal"></p>
<p class="MsoListParagraphCxSpFirst" style=""><span style=""><span style="">Step 1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Create a C# &quot;ASP.Net Empty Web Application&quot; in Visual Studio 2012 or Visual Studio Express 2012. Name it as &quot;CSComboBoxSysApplicationLoadName.&quot;</p>
<p class="MsoListParagraphCxSpMiddle" style=""><span style=""><span style="">Step 2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Add a Web Form page in the project.Name it as &quot;Default.aspx.&quot;</p>
<p class="MsoListParagraphCxSpMiddle" style=""><span style=""><span style="">Step 3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Add reference of AJAX Control Toolkit to project.</p>
<p class="MsoListParagraphCxSpMiddle" style=""><span style=""><span style="">Step 4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Add a ComboBox Control, whose ID is ComboBox1 with two ListItems.</p>
<p class="MsoListParagraphCxSpLast" style=""><span style=""><span style="">Step 5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>At code behind, in Page_Load. Add one ListItem to ComboBox1.</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span>
</div>
<span class="hidden">csharp</span>
<pre class="hidden">
protected void Page_Load(object sender, EventArgs e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ComboBox1.Items.Add(&quot;Added at code behind&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }

</pre>
<pre id="codePreview" class="csharp">
protected void Page_Load(object sender, EventArgs e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ComboBox1.Items.Add(&quot;Added at code behind&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }

</pre>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<p class="MsoListParagraphCxSpFirst" style=""><span style=""><span style="">Step 6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Add one TextBox Control for comparison.</p>
<p class="MsoListParagraphCxSpLast" style=""><span style=""><span style="">Step 7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Create a javascript function to iterate all inputs whose type is &quot;text&quot;.
</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>JavaScript</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span>
</div>
<span class="hidden">js</span>
<pre class="hidden">
var loader = function () {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var inputs = document.getElementsByTagName('input');
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (var i = 0; i &lt; inputs.length; i&#43;&#43;) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var input = inputs[i];


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (input.getAttribute('type') == 'text') {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(input.value);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //loader();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sys.Application.add_load(loader);

</pre>
<pre id="codePreview" class="js">
var loader = function () {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var inputs = document.getElementsByTagName('input');
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (var i = 0; i &lt; inputs.length; i&#43;&#43;) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var input = inputs[i];


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (input.getAttribute('type') == 'text') {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(input.value);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //loader();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sys.Application.add_load(loader);

</pre>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<p class="MsoListParagraphCxSpFirst">Expect that &quot;Item1&quot; and &quot;I am a TextBox.&quot; get alerted. Alternatively, &quot;added at code behind&quot; is alerted because it is created at code behind.<br>
<b style="">Note</b>: As Both ComboBox and TextBox are rendered &lt;input type=&quot;text&quot; /&gt; at client side, expectedly they can be found by using document.getElementsByTagName('input') and<span style="">&nbsp;&nbsp;&nbsp;&nbsp;
</span>element.getAttribute('type') == 'text'. But in fact only the TextBox Control's value can be retrived.</p>
<p class="MsoListParagraphCxSpLast" style=""><span style=""><span style="">Step 8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Use Microsoft AJAX's Sys.Application.add_load to load the function created in Step 7. This time both &quot;Item1&quot; and &quot;I am a TextBox.&quot; are alerted.</p>
<h2>More Information</h2>
<p class="MsoNormal">Ajax Control Toolkit ComboBox<br>
<a href="http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/ComboBox/ComboBox.aspx">http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/ComboBox/ComboBox.aspx</a><br>
AjaxControl Toolkit Library<br>
<a href="http://www.asp.net/ajaxlibrary/Reference.Sys-Application-load-Event.ashx">http://www.asp.net/ajaxlibrary/Reference.Sys-Application-load-Event.ashx</a><br>
getAttribute Method<br>
<a href="http://msdn.microsoft.com/en-us/library/ms536429(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ms536429(v=vs.85).aspx</a></p>
<hr>
<div><a href="http://go.microsoft.com/?linkid=9759640" style="margin-top:3px"><img alt="" src="http://bit.ly/onecodelogo">
</a></div>
