<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="description/Combined.css,0:HeaderFooterSprite,0:Header.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=C9973DA951AE6202C9B348379A1BE49D" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="description/b79636be-b088-48b5-8a8d-c21645d26d2fCombined.css,0:HeaderFooterSprite,0:Footer.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=F576C687BC536B84D6E5B3246EE39B49" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Windows Azure Access Control for Single Sign-On(SSO)</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="description/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="description/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>Windows Azure Access Control for Single Sign-On(SSO)</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            Microsoft Azure
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            Single Sign-On, SSO
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Cloud
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">7/3/2013</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">Apache License, Version 2.0</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="http://code.msdn.microsoft.com/Windows-Azure-Access-d01d282b">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1><span lang="EN-US">Windows Azure Access control service for Web Role (CSAzureAccessControlService)</span></h1>
<h2><span lang="EN-US">Introduction</span></h2>
<p class="MsoNormal"><span lang="EN-US">This sample code demonstrates how to implement for Access Control Service for your web role application, As we know most of websites and web application has their own user validation system, such simple UserName-Password
 way, Active Directory, etc. If your web application must support multiple user validation, you must handle different token with different methods, but when you try to move your application to Windows Azure, you will find we can use Access Control for solve
 this problem, your azure application need only handle one kind of Token from Windows Azure Access Control Service</span><span lang="EN-US" style="">
</span></p>
<p class="MsoNormal" align="right" style="text-align:right"><span lang="EN-US"><a href="http://www.microsoft.com/click/services/Redirect2.ashx?CR_CC=200144420"><span style="color:windowtext; text-decoration:none"><span style=""><img src="description/image.png" alt="" width="120" height="90" align="middle">
</span></span></a><br>
<a href="http://www.microsoft.com/click/services/Redirect2.ashx?CR_CC=200144420">Try Windows Azure for free for 90 Days!</a></span><span lang="EN-US" style="">
</span></p>
<h2><span lang="EN-US">Building the Sample</span></h2>
<p class="MsoNormal"><span lang="EN-US">Before running this sample, please install latest Windows Azure SDK and Windows Azure Toolkit for Visual Studio</span></p>
<p class="MsoNormal"><span lang="EN-US"><a href="http://www.windowsazure.com/en-us/develop/downloads/">http://www.windowsazure.com/en-us/develop/downloads/</a></span></p>
<p class="MsoNormal"><span lang="EN-US">SQL Server 2008 R2 Express:</span></p>
<p class="MsoNormal"><span lang="EN-US"><a href="http://www.microsoft.com/download/en/details.aspx?id=23650">http://www.microsoft.com/download/en/details.aspx?id=23650</a>
</span></p>
<h2><span lang="EN-US">Running the Sample</span></h2>
<p class="MsoNormal"><span lang="EN-US" style="">Before run your application, you have to create a Access Control Service in Windows Azure platform and</span><span lang="EN-US"> create some identity providers with your subscription. Following the ACS Management
 Portal Wizard and input your information.</span></p>
<p class="MsoNormal"><b style=""><span lang="EN-US">Step 1</span></b><span lang="EN-US">, create preconfigured Identity Providers:</span></p>
<p class="MsoNormal"><span lang="EN-US">Your work is adding Windows Live ID, Google, Yahoo! Identity providers in your Access Control Service Management Portal.</span></p>
<p class="MsoNormal"><b style=""><span lang="EN-US">Step 2</span></b><span lang="EN-US">, create Relying-Party Application:</span></p>
<p class="MsoNormal"><span lang="EN-US" style="">Name: Your RP (Relying-Party application name) Name.
</span></p>
<p class="MsoNormal"><span lang="EN-US" style="">Mode: Enter settings manually </span>
</p>
<p class="MsoNormal"><span lang="EN-US" style="">Realm: Your application directory path.
</span></p>
<p class="MsoNormal"><span lang="EN-US" style="">Return URL: Your application return page path.
</span></p>
<p class="MsoNormal"><span lang="EN-US" style="">Token Format: SAML 2.0 </span>
</p>
<p class="MsoNormal"><span lang="EN-US" style="">Token LifeTime: 600 </span></p>
<p class="MsoNormal"><span lang="EN-US" style="">Identity Providers: Google, Windows Live ID, Yahoo!
</span></p>
<p class="MsoNormal"><span lang="EN-US" style="">Token Singing: Use Service namespace certificate (standard)
</span></p>
<p class="MsoNormal"><span lang="EN-US">Then add ACS as the STS reference in your application:</span></p>
<p class="MsoNormal"><b style=""><span lang="EN-US">Step 3</span></b><span lang="EN-US">:<span style="">&nbsp;
</span>Please press F5 to start debugging, you will see the following page in your browser:</span></p>
<p class="MsoNormal"><span lang="EN-US" style=""><img src="description/9ca51621-a3d4-4900-9060-64e9b3c3ecd8image.png" alt="" width="576" height="527" align="middle">
</span></p>
<p class="MsoNormal"><b style=""><span lang="EN-US" style="">Step 4</span></b><span lang="EN-US" style="">: Click &quot;Login&quot; button and you can find 3 ways to login your website.
</span></p>
<p class="MsoNormal"><span lang="EN-US" style=""><img src="description/280a28ad-b23a-4ffc-8f8d-5d90e0f7efa6image.png" alt="" width="576" height="527" align="middle">
</span></p>
<p class="MsoNormal"><b style=""><span lang="EN-US" style="">Step 5</span></b><span lang="EN-US" style="">: If User name and password are correct, you can visit the whole web application now.
</span></p>
<p class="MsoNormal"><span lang="EN-US" style=""><img src="description/278aed3e-3d64-49f2-8881-9a69bf9bea8aimage.png" alt="" width="576" height="527" align="middle">
</span></p>
<p class="MsoNormal"><b style=""><span lang="EN-US">Step </span></b><b style=""><span lang="EN-US" style="">6</span></b><span lang="EN-US">: Validation is finished.</span></p>
<h2><span lang="EN-US">Using the Code</span></h2>
<p class="MsoNormal"><span lang="EN-US">Control Service</span></p>
<p class="MsoNormal"><b style=""><span lang="EN-US">Step 1</span></b><span lang="EN-US">. Create a C# &quot;Windows Azure Project&quot; in Visual Studio 2012. Name it as &quot;<span style="">CSAzureAccessControlService</span>&quot;. Add a Web Role and named
 it as &quot;<span style="">CSAzureAccessControlService</span>WebRole&quot;.</span></p>
<p class="MsoNormal"><b style=""><span lang="EN-US">Step 2</span></b><span lang="EN-US">. Please following the step 2 of section &quot;Running the sample&quot; create ACS with Azure subscription. Add two web pages in CSAzureAccessControlServiceWebRole application,
 the Default.aspx can be accessed by anyone.<b style=""> </b></span></p>
<h3><span lang="EN-US">The following xml is used to set &quot;All&quot; folder as the public folder.</span></h3>
<p class="MsoNormal"><b style=""><span lang="EN-US">Step 3</span></b><span lang="EN-US">. The next step, display customers' user name in Content.aspx page.
</span></p>
<h3><span lang="EN-US">The following code shows how to display user identity name in Content.aspx page.
</span></h3>
<p class="MsoNormal"><b style=""><span lang="EN-US">Step 4</span></b><span lang="EN-US">. Build the application and you can debug it.</span></p>
<h2><span lang="EN-US">More Information</span></h2>
<p class="MsoNormal" style=""><span lang="EN-US"><a href="http://msdn.microsoft.com/en-us/library/windowsazure/gg429786.aspx">Access Control Service 2.0</a></span></p>
<p class="MsoNormal"><span lang="EN-US"></span></p>
<hr>
<div><a href="http://go.microsoft.com/?linkid=9759640" style="margin-top:3px"><img alt="" src="description/ca9472f8-1a5f-492d-bd3b-00bf6bf71aa5image.png">
</a></div>

</div>


    </div>
</body>
</html>
