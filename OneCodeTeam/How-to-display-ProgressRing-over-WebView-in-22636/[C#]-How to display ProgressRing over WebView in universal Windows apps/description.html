<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Header,0:HeaderFooterSprite,0:Header.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;v=5CF4E24D59324FBE66CF8C9A49A3F942" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Footer,0:HeaderFooterSprite,0:Footer.NonMtps,1:FooterSock,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;v=F8E8917DA8158DB3E7C6F07AA1FFC4F3" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>How to display ProgressRing over WebView in universal Windows apps</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="https://i1.code.msdn.s-msft.com/content/common/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="https://i1.code.msdn.s-msft.com/content/common/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>How to display ProgressRing over WebView in universal Windows apps</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            Windows, Windows Phone, Windows 8, Windows Phone 8, Windows Store app Development, Windows Phone Development, Windows 8.1, Windows Phone 8.1
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            WebView, ProgressRing, universal app
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Phone, Windows RT
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">12/15/2014</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">Apache License, Version 2.0</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="https://code.msdn.microsoft.com/How-to-put-a-ProgressRing-0ecc7c2b">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1>How to display ProgressRing over WebView in universal Windows apps</h1>
<h2>Introduction</h2>
<p>This sample demonstrates how to display ProgressRing over WebView. As the WebView in Windows 8.1/Windows Phone 8.1 first supports overlay control, so we upgraded this sample. Now this sample just overlays the ProgressRing onto a WebView instead of the tricky
 way which uses WebView brush.</p>
<p>See <a href="http://blogs.windows.com/buildingapps/2013/07/17/whats-new-in-webview-in-windows-8-1/">
What&rsquo;s new in WebView in Windows 8.1</a></p>
<p>This sample targets both Windows 8.1 and Windows Phone 8.1.</p>
<h2>Running the Sample</h2>
<ol>
<li>Press F5 to run it. </li></ol>
<p>&nbsp; &nbsp; &nbsp;2. &nbsp;After the sample is launched, the screen will display as below in Windows 8.1.</p>
<p><img id="131151" src="https://i1.code.msdn.s-msft.com/how-to-put-a-progressring-0ecc7c2b/image/file/131151/1/dsf.png" alt="" width="600" height="338" style="border:1px solid black"></p>
<p>The Windows Phone 8.1 will display as below:</p>
<p><img id="131152" src="https://i1.code.msdn.s-msft.com/how-to-put-a-progressring-0ecc7c2b/image/file/131152/1/er'te'r't.png" alt="" width="355" height="592" style="display:block; margin-left:auto; margin-right:auto"></p>
<p>&nbsp; &nbsp; &nbsp;3. &nbsp;Please enter a valid url and click the &lsquo;Load&rsquo; button to load the page, then enter another url and click the &lsquo;Load&rsquo; button again. You will see a ProgressRing over the first page before the second page is
 loading.</p>
<p><img id="131154" src="https://i1.code.msdn.s-msft.com/how-to-put-a-progressring-0ecc7c2b/image/file/131154/1/121212121.png" alt="" width="600" height="338" style="border:1px solid black"></p>
<p><img id="131155" src="https://i1.code.msdn.s-msft.com/how-to-put-a-progressring-0ecc7c2b/image/file/131155/1/er'te'r't.png" alt="" width="355" height="592" style="display:block; margin-left:auto; margin-right:auto"></p>
<p><strong>PS:</strong> When the page is loading, a JavaScript exception may be thrown. This is not caused by the sample but by the web page&mdash;many web pages have JavaScript problems, even some famous websites. This issue only occurs during debugging. You
 can get rid of those annoying JavaScript exceptions in the way mentioned in this blog:</p>
<p><a href="http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx#AN10">http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx#AN10</a></p>
<p>&nbsp;</p>
<h2>Using the Code</h2>
<p>The code below shows the XAML UI.</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>XAML</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">xaml</span>
<pre class="hidden">&lt;Grid&gt; 
 &lt;WebView Name=&quot;DisplayWebView&quot; NavigationCompleted=&quot;DisplayWebView_NavigationCompleted&quot;  VerticalAlignment=&quot;Stretch&quot; HorizontalAlignment=&quot;Stretch&quot;/&gt; 
&lt;ProgressRing Name=&quot;LoadingProcessProgressRing&quot; Width=&quot;50&quot; Height=&quot;50&quot; Background=&quot;Transparent&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot;/&gt; 
 &lt;/Grid&gt;
</pre>
<div class="preview">
<pre class="xaml"><span class="xaml__tag_start">&lt;Grid</span><span class="xaml__tag_start">&gt;&nbsp;</span><span class="xaml__tag_start">&lt;WebView</span><span class="xaml__attr_name">Name</span>=<span class="xaml__attr_value">&quot;DisplayWebView&quot;</span><span class="xaml__attr_name">NavigationCompleted</span>=<span class="xaml__attr_value">&quot;DisplayWebView_NavigationCompleted&quot;</span><span class="xaml__attr_name">VerticalAlignment</span>=<span class="xaml__attr_value">&quot;Stretch&quot;</span><span class="xaml__attr_name">HorizontalAlignment</span>=<span class="xaml__attr_value">&quot;Stretch&quot;</span><span class="xaml__tag_start">/&gt;</span><span class="xaml__tag_start">&lt;ProgressRing</span><span class="xaml__attr_name">Name</span>=<span class="xaml__attr_value">&quot;LoadingProcessProgressRing&quot;</span><span class="xaml__attr_name">Width</span>=<span class="xaml__attr_value">&quot;50&quot;</span><span class="xaml__attr_name">Height</span>=<span class="xaml__attr_value">&quot;50&quot;</span><span class="xaml__attr_name">Background</span>=<span class="xaml__attr_value">&quot;Transparent&quot;</span><span class="xaml__attr_name">HorizontalAlignment</span>=<span class="xaml__attr_value">&quot;Center&quot;</span><span class="xaml__attr_name">VerticalAlignment</span>=<span class="xaml__attr_value">&quot;Center&quot;</span><span class="xaml__tag_start">/&gt;</span><span class="xaml__tag_end">&lt;/Grid&gt;</span></pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;The Code below shows HTML UI:</div>
<div class="endscriptcode">
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>HTML</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">html</span>
<pre class="hidden">&lt;div class=&quot;output&quot;&gt;                 
&lt;x-ms-webview id=&quot;webview&quot;&gt;&lt;/x-ms-webview&gt;
&lt;label id=&quot;progressRingContainer&quot;&gt; 
&lt;progress id=&quot;loadingProcessProgressRing&quot; class=&quot;win-ring&quot;&gt;
&lt;/progress&gt; 
&lt;/label&gt; 
&lt;/div&gt;
</pre>
<div class="preview">
<pre class="html"><span class="html__tag_start">&lt;div</span><span class="html__attr_name">class</span>=<span class="html__attr_value">&quot;output&quot;</span><span class="html__tag_start">&gt;&nbsp;</span><span class="html__tag_start">&lt;x</span>-ms-webview&nbsp;<span class="html__attr_name">id</span>=<span class="html__attr_value">&quot;webview&quot;</span><span class="html__tag_start">&gt;</span>&lt;/x-ms-webview&gt;&nbsp;
<span class="html__tag_start">&lt;label</span><span class="html__attr_name">id</span>=<span class="html__attr_value">&quot;progressRingContainer&quot;</span><span class="html__tag_start">&gt;&nbsp;</span><span class="html__tag_start">&lt;progress</span><span class="html__attr_name">id</span>=<span class="html__attr_value">&quot;loadingProcessProgressRing&quot;</span><span class="html__attr_name">class</span>=<span class="html__attr_value">&quot;win-ring&quot;</span><span class="html__tag_start">&gt;&nbsp;
</span><span class="html__tag_end">&lt;/progress&gt;</span><span class="html__tag_end">&lt;/label&gt;</span><span class="html__tag_end">&lt;/div&gt;</span></pre>
</div>
</div>
</div>
</div>
<div class="endscriptcode">The code below shows Load button click event handler:</div>
<div class="endscriptcode">
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>C&#43;&#43;</span><span>JavaScript</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">cplusplus</span><span class="hidden">js</span>
<pre class="hidden">private void LoadButton_Click(object sender, RoutedEventArgs e) 
        { 
            Uri uri = ValidateAndGetUri(UrlTextBox.Text); 
            if (uri != null) 
            { 
                try 
                { 
                    LoadingProcessProgressRing.IsActive = true; 
                    LoadingProcessProgressRing.Visibility = Windows.UI.Xaml.Visibility.Visible; 
                    LoadButton.IsEnabled = false; 
  
                    DisplayWebView.Navigate(uri); 
                } 
                catch (Exception ex) 
                { 
                    NotifyUser(ex.ToString()); 
                } 
            } 
        } 
</pre>
<pre class="hidden">void MainPage::LoadButton_Click(Object^ sender, RoutedEventArgs^ e) 
{ 
Uri^ uri = ValidateAndGetUri(UrlTextBox-&gt;Text); 
if (uri != nullptr) 
{ 
try 
{ 
LoadingProcessProgressRing-&gt;IsActive = true; 
LoadingProcessProgressRing-&gt;Visibility = Windows::UI::Xaml::Visibility::Visible; 
LoadButton-&gt;IsEnabled = false; 
DisplayWebView-&gt;Navigate(uri); 
} 
catch (Platform::Exception^ ex) 
{ 
NotifyUser(ex-&gt;ToString()); 
} 
} 
} 
</pre>
<pre class="hidden">function loadButtonClick() { 
        // Retrieve the DOM element  
        var loadButton = document.getElementById(&quot;loadbtn&quot;); 
        if (loadButton.hasAttribute(&quot;disabled&quot;)) 
        { 
            return; 
        } 
        loadButton.disabled = &quot;disabled&quot;; 
         
        try 
        {             
            document.getElementById(&quot;webview&quot;).navigate(document.getElementById(&quot;urltxb&quot;).value); 
        } 
        catch(e) 
        { 
            var error = document.getElementById(&quot;urlerror&quot;); 
            error.textContent = e.message; 
            error.style.visibility = &quot;visible&quot;; 
            return; 
        }       
         
  
        document.getElementById(&quot;urlerror&quot;).style.visibility = &quot;collapse&quot;; 
  
        document.getElementById(&quot;loadingProcessProgressRing&quot;).style.visibility = &quot;visible&quot;; 
  
    }
</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">private</span><span class="cs__keyword">void</span>&nbsp;LoadButton_Click(<span class="cs__keyword">object</span>&nbsp;sender,&nbsp;RoutedEventArgs&nbsp;e)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uri&nbsp;uri&nbsp;=&nbsp;ValidateAndGetUri(UrlTextBox.Text);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>&nbsp;(uri&nbsp;!=&nbsp;<span class="cs__keyword">null</span>)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">try</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LoadingProcessProgressRing.IsActive&nbsp;=&nbsp;<span class="cs__keyword">true</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LoadingProcessProgressRing.Visibility&nbsp;=&nbsp;Windows.UI.Xaml.Visibility.Visible;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LoadButton.IsEnabled&nbsp;=&nbsp;<span class="cs__keyword">false</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DisplayWebView.Navigate(uri);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">catch</span>&nbsp;(Exception&nbsp;ex)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NotifyUser(ex.ToString());&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
</pre>
</div>
</div>
</div>
</div>
<p>&nbsp;</p>
<h2>More Information</h2>
<p>WebView class</p>
<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx">http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx</a></p>
<p>ProgressRing class</p>
<p><a href="http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.progressring.aspx">http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.progressring.aspx</a></p>
<p>What&rsquo;s new in WebView in Windows 8.1</p>
<p><a href="http://blogs.windows.com/buildingapps/2013/07/17/whats-new-in-webview-in-windows-8-1/">http://blogs.windows.com/buildingapps/2013/07/17/whats-new-in-webview-in-windows-8-1/</a></p>
<p>&nbsp;</p>
<div class="endscriptcode"></div>

</div>


    </div>
</body>
</html>
